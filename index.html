
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Introduction · a11y-dialog</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Hugo “Kitty” Giraudel">
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="./" />
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./#a11y-dialog">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="./">
            
                <a href="./#installation">
            
                    
                    Installation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="./">
            
                <a href="./#using-a-bundler-recommended">
            
                    
                    Using a bundler (recommended)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="./">
            
                <a href="./#using-a-cdn">
            
                    
                    Using a CDN
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="./">
            
                <a href="./#usage">
            
                    
                    Usage
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="./">
            
                <a href="./#html-boilerplate">
            
                    
                    HTML boilerplate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="./">
            
                <a href="./#styling">
            
                    
                    Styling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="./">
            
                <a href="./#instantiation">
            
                    
                    Instantiation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="./">
            
                <a href="./#dom-api">
            
                    
                    DOM API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="./">
            
                <a href="./#js-api">
            
                    
                    JS API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="./">
            
                <a href="./#advanced">
            
                    
                    Advanced
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="./">
            
                <a href="./#focus-considerations">
            
                    
                    Focus considerations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="./">
            
                <a href="./#events">
            
                    
                    Events
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="./">
            
                <a href="./#animations">
            
                    
                    Animations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="./">
            
                <a href="./#prevent-window-scroll">
            
                    
                    Prevent window scroll
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="./">
            
                <a href="./#usage-as-a-modal">
            
                    
                    Usage as a modal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="./">
            
                <a href="./#using-the-dialog-html-element">
            
                    
                    Using the dialog HTML element
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="./">
            
                <a href="./#nested-dialogs">
            
                    
                    Nested dialogs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="./">
            
                <a href="./#further-reading">
            
                    
                    Further reading
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="./">
            
                <a href="./#known-issues">
            
                    
                    Known issues
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="./">
            
                <a href="./#implementations">
            
                    
                    Implementations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="./">
            
                <a href="./#disclaimer--credits">
            
                    
                    Disclaimer & credits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" >
            
                <a target="_blank" href="http://hugogiraudel.github.io/a11y-dialog/example/">
            
                    
                    Example ↗
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" >
            
                <a target="_blank" href="https://github.com/HugoGiraudel/a11y-dialog">
            
                    
                    GitHub repository ↗
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Introduction</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="a11y-dialog"><a href="http://hugogiraudel.github.io/a11y-dialog/" target="_blank">A11y Dialog</a></h1>
<p><a href="http://hugogiraudel.github.io/a11y-dialog/" target="_blank">a11y-dialog</a> is a lightweight (1.6Kb) yet flexible script to create accessible dialog windows.</p>
<p>&#x2714;&#xFE0E; Leveraging the native <code>&lt;dialog&gt;</code> element if desired<br>&#x2714;&#xFE0E; Closing dialog on overlay click and <kbd>ESC</kbd><br>&#x2714;&#xFE0E; Toggling <code>aria-*</code> attributes<br>&#x2714;&#xFE0E; Trapping and restoring focus<br>&#x2714;&#xFE0E; Firing events<br>&#x2714;&#xFE0E; DOM and JS APIs<br>&#x2714;&#xFE0E; Fast and tiny</p>
<p>You can try the <a href="http://hugogiraudel.github.io/a11y-dialog/example/" target="_blank">live demo &#x2197;</a>.</p>
<h2 id="installation">Installation</h2>
<h3 id="using-a-bundler-recommended">Using a bundler (recommended)</h3>
<p>If you&#x2019;re using a bundler (such as Webpack or Rollup), you can install <code>a11y-dialog</code> through npm or yarn like any other dependency:</p>
<pre><code class="lang-sh">npm install a11y-dialog
</code></pre>
<pre><code class="lang-sh">yarn add a11y-dialog
</code></pre>
<p>Then you can import the library in your JavaScript codebase to access the <code>A11yDialog</code> class and instantiate your dialogs as you intend to.</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> A11yDialog <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;a11y-dialog&apos;</span>

<span class="hljs-keyword">const</span> container = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;#my-dialog-container&apos;</span>)
<span class="hljs-keyword">const</span> dialog = <span class="hljs-keyword">new</span> A11yDialog(container)
</code></pre>
<p>If you rely on the <code>data-a11y-dialog</code> attribute to automate the dialog <a href="#instantiation">instantiation</a> in order not to write JavaScript at all, you could simplify the import as such:</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> <span class="hljs-string">&apos;a11y-dialog&apos;</span>
</code></pre>
<h3 id="using-a-cdn">Using a CDN</h3>
<p>If you prefer loading <code>a11y-dialog</code> from a CDN such as jsdelivr or unpkg, you can do so by adding this script tag in your HTML. It will expose the <code>A11yDialog</code> global variable.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>
  <span class="hljs-attr">defer</span>
  <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/a11y-dialog@6/dist/a11y-dialog.min.js&quot;</span>
&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>If you intend to use ES modules, you can use the ESM version of script (from v6.0.0 onwards only):</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">import</span> A11yDialog <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;https://cdn.jsdelivr.net/npm/a11y-dialog@6/dist/a11y-dialog.esm.min.js&apos;</span>

  <span class="hljs-keyword">const</span> container = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;#my-dialog-container&apos;</span>)
  <span class="hljs-keyword">const</span> dialog = <span class="hljs-keyword">new</span> A11yDialog(container)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 id="usage">Usage</h2>
<p>You will find a concrete demo in the <a href="https://github.com/HugoGiraudel/a11y-dialog/tree/main/example" target="_blank">example</a> folder of this repository, but basically here is the gist:</p>
<h3 id="html-boilerplate">HTML boilerplate</h3>
<p>Here is the basic markup, which can be enhanced. Pay extra attention to the comments.</p>
<pre><code class="lang-html"><span class="hljs-comment">&lt;!-- 1. The main content container --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;main&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-comment">&lt;!-- 2. The dialog container --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;your-dialog-id&quot;</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- 3. The dialog overlay --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">&quot;-1&quot;</span> <span class="hljs-attr">data-a11y-dialog-hide</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- 4. The actual dialog --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;dialog&quot;</span> <span class="hljs-attr">aria-labelledby</span>=<span class="hljs-string">&quot;your-dialog-title-id&quot;</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 5. The inner document --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;document&quot;</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- 6. The close button --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">data-a11y-dialog-hide</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Close dialog&quot;</span>&gt;</span>
        &amp;times;
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- 7. The dialog title --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;your-dialog-title-id&quot;</span>&gt;</span>Your dialog title<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- 8. Dialog content --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<ol>
<li><p>The main container is where your site/app content lives.</p>
<ul>
<li>It can have a different id than <code>main</code>, however you will have to pass it as a second argument to the A11yDialog instance. See <a href="#instantiation">instantiation instructions</a> further down.</li>
</ul>
</li>
<li><p>The dialog container.</p>
<ul>
<li>It is not the actual dialog window, just the container with which the script interacts.</li>
<li>It can have a different id than <code>your-dialog-id</code>, but it needs an <code>id</code> anyway.</li>
<li>It might need a class for you to be able to style it.</li>
<li>It should have an initial <code>aria-hidden=&quot;true&quot;</code> to avoid a &#x201C;flash of unhidden dialog&#x201D; on page load.</li>
<li>It can have the <code>data-a11y-dialog</code> attribute (with the &#x201C;targets&#x201D; as value, see <a href="#instantiation">Instantiation</a>) to automatically instantiate the dialog without JavaScript.</li>
</ul>
</li>
<li><p>The dialog overlay.</p>
<ul>
<li>It has to have the <code>tabindex=&quot;-1&quot;</code> attribute.</li>
<li>It doesn&#x2019;t have to have the <code>data-a11y-dialog-hide</code> attribute, however this is recommended. It hides the dialog when clicking outside of it.</li>
<li>It should not have the <code>data-a11y-dialog-hide</code> if the dialog window has the <code>alertdialog</code> role (see below).</li>
</ul>
</li>
<li><p>The actual dialog.</p>
<ul>
<li>It may have the <code>alertdialog</code> role to make it behave like a &#x201C;modal&#x201D;. See the <a href="#usage-as-a-modal">Usage as a modal</a> section of the docs.</li>
<li>It can be a <code>&lt;dialog&gt;</code> element, but <a href="#using-the-dialog-html-element">is not recommended</a>.</li>
<li>It doesn&#x2019;t have to have the <code>aria-labelledby</code> attribute however this is recommended. It should match the <code>id</code> of the dialog title.</li>
</ul>
</li>
<li><p>The inner document.</p>
<ul>
<li>It doesn&#x2019;t have to exist but improves support in NVDA.</li>
<li>It doesn&#x2019;t have to exist when using <code>&lt;dialog&gt;</code> because is implied.</li>
</ul>
</li>
<li><p>The dialog close button.</p>
<ul>
<li>It does have to have the <code>type=&quot;button&quot;</code> attribute.</li>
<li>It does have to have the <code>data-a11y-dialog-hide</code> attribute.</li>
<li>It does have to have an <code>aria-label</code> attribute if you use an icon as content.</li>
</ul>
</li>
<li><p>The dialog title.</p>
<ul>
<li>It should have a different content than &#x201C;Dialog Title&#x201D;.</li>
<li>It can have a different id than <code>your-dialog-title-id</code>.</li>
</ul>
</li>
<li><p>The dialog content.</p>
<ul>
<li>This is where your dialog content lives.</li>
</ul>
</li>
</ol>
<h3 id="styling">Styling</h3>
<p>The script itself does not take care of any styling whatsoever, not even the <code>display</code> property. It basically mostly toggles the <code>aria-hidden</code> attribute on the dialog itself and its counterpart content containers (where the rest of the site/app lives).</p>
<p>Here is a solid set of styles to get started (note that you might have to rename the class names to fit your code):</p>
<pre><code class="lang-css"><span class="hljs-comment">/**
 * 1. Make the dialog container, and its child overlay spread across the entire 
 *    window.
 */</span>
<span class="hljs-selector-class">.dialog-container</span>,
<span class="hljs-selector-class">.dialog-overlay</span> {
  <span class="hljs-attribute">position</span>: fixed; <span class="hljs-comment">/* 1 */</span>
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>; <span class="hljs-comment">/* 1 */</span>
  <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>; <span class="hljs-comment">/* 1 */</span>
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>; <span class="hljs-comment">/* 1 */</span>
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>; <span class="hljs-comment">/* 1 */</span>
}

<span class="hljs-comment">/**
 * 1. Make sure the dialog container and all its descendants sits on top of the
 *    rest of the page.
 * 2. Make the dialog container a flex container to easily center the dialog.
 */</span>
<span class="hljs-selector-class">.dialog-container</span> {
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2</span>; <span class="hljs-comment">/* 1 */</span>
  <span class="hljs-attribute">display</span>: flex; <span class="hljs-comment">/* 2 */</span>
}

<span class="hljs-comment">/**
 * 1. Make sure the dialog container and all its descendants are not visible and
 *    not focusable when the dialog is hidden.
 */</span>
<span class="hljs-selector-class">.dialog-container</span><span class="hljs-selector-attr">[aria-hidden=&apos;true&apos;]</span> {
  <span class="hljs-attribute">display</span>: none; <span class="hljs-comment">/* 1 */</span>
}

<span class="hljs-comment">/**
 * 1. Make the overlay look like an overlay.
 */</span>
<span class="hljs-selector-class">.dialog-overlay</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(43, 46, 56, 0.9); <span class="hljs-comment">/* 1 */</span>
}

<span class="hljs-comment">/**
 * 1. Vertically and horizontally center the dialog in the page.
 * 2. Make sure the dialog sits on top of the overlay.
 * 3. Make sure the dialog has an opaque background.
 */</span>
<span class="hljs-selector-class">.dialog-content</span> {
  <span class="hljs-attribute">margin</span>: auto; <span class="hljs-comment">/* 1 */</span>
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2</span>; <span class="hljs-comment">/* 2 */</span>
  <span class="hljs-attribute">position</span>: relative; <span class="hljs-comment">/* 2 */</span>
  <span class="hljs-attribute">background-color</span>: white; <span class="hljs-comment">/* 3 */</span>
}
</code></pre>
<p>The rest, such as what the dialog really looks like, and how its content is styled, is left at your own discretion. These styles should be enough to get you on the right track.</p>
<h3 id="instantiation">Instantiation</h3>
<p>By default, any dialog container having the <code>data-a11y-dialog</code> attribute will be automatically instantiated. This is so that there is no need for any JavaScript (besides loading the script). The value of the attribute, if given, should be a selector, serving the same purpose as the 2nd attribute of the <code>A11yDialog</code> constructor (see below).</p>
<pre><code class="lang-html"><span class="hljs-comment">&lt;!-- The content of the `data-a11y-dialog` attribute should be
     the selector containing the main website&#x2019;s or app&#x2019;s code.
     See HTML boilerplate&#x201D; for more information. --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>
  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;dialog-container&quot;</span>
  <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;your-dialog-id&quot;</span>
  <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">&quot;true&quot;</span>
  <span class="hljs-attr">data-a11y-dialog</span>=<span class="hljs-string">&quot;#root&quot;</span>
&gt;</span>
  &#x2026;
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>If automatic loading is not an option because the expected dialog markup is not present in the DOM on script execution (or the dialog instance is needed to do more complicated things), it can be instantiated through JavaScript.</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// Get the dialog container HTML element (with the accessor method you want)</span>
<span class="hljs-keyword">const</span> el = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;your-dialog-id&apos;</span>)

<span class="hljs-comment">// Instantiate a new A11yDialog module</span>
<span class="hljs-keyword">const</span> dialog = <span class="hljs-keyword">new</span> A11yDialog(el)
</code></pre>
<p>As recommended in the <a href="#html-boilerplate">HTML section</a> of this documentation, the dialog element is supposed to be on the same level as your content container(s). Therefore, the script will toggle the <code>aria-hidden</code> attribute of the siblings of the dialog element as a default. You can change this behaviour by passing a <code>NodeList</code>, an <code>Element</code> or a selector as second argument to the <code>A11yDialog</code> constructor:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> container = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;#root&apos;</span>)
<span class="hljs-keyword">const</span> dialog = <span class="hljs-keyword">new</span> A11yDialog(el, container)
</code></pre>
<h3 id="dom-api">DOM API</h3>
<p>The DOM API relies on <code>data-*</code> attributes. They all live under the <code>data-a11y-dialog-*</code> namespace for consistency, clarity and robustness. Two attributes are recognised:</p>
<ul>
<li><code>data-a11y-dialog-show</code>: the <code>id</code> of the dialog element is expected as a value</li>
<li><code>data-a11y-dialog-hide</code>: the <code>id</code> of the dialog element is expected as a value; if omitted, the closest parent dialog element (if any) will be the target</li>
</ul>
<p>The following button will open the dialog with the <code>your-dialog-id</code> id when interacted with.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">data-a11y-dialog-show</span>=<span class="hljs-string">&quot;your-dialog-id&quot;</span>&gt;</span>
  Open the dialog
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p>The following button will close the dialog in which it lives when interacted with.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">data-a11y-dialog-hide</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Close the dialog&quot;</span>&gt;</span>
  &amp;times;
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p>The following button will close the dialog with the <code>your-dialog-id</code> id when interacted with. Given that the only focusable elements when the dialog is open are the focusable children of the dialog itself, it seems rather unlikely that you will ever need this but in case you do, well you can.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
  <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span>
  <span class="hljs-attr">data-a11y-dialog-hide</span>=<span class="hljs-string">&quot;your-dialog-id&quot;</span>
  <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Close the dialog&quot;</span>
&gt;</span>
  &amp;times;
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<h3 id="js-api">JS API</h3>
<p>Regarding the JS API, it simply consists on <code>show()</code> and <code>hide()</code> methods on the dialog instance.</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// Show the dialog</span>
dialog.show()

<span class="hljs-comment">// Hide the dialog</span>
dialog.hide()
</code></pre>
<p>For advanced usages, there are <code>create()</code> and <code>destroy()</code> methods. These are responsible for attaching click event listeners to dialog openers and closers. Note that the <code>create()</code> method is <strong>automatically called on instantiation</strong> so there is no need to call it again directly.</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// Unbind click listeners from dialog openers and closers and remove all bound</span>
<span class="hljs-comment">// custom event listeners registered with `.on()`</span>
dialog.destroy()

<span class="hljs-comment">// Bind click listeners to dialog openers and closers</span>
dialog.create()
</code></pre>
<p>If necessary, the <code>create()</code> method also accepts the <code>targets</code> containers (the one toggled along with the dialog element) in the same form as the second argument from the constructor. If omitted, the one given to the constructor (or default) will be used.</p>
<h2 id="advanced">Advanced</h2>
<h3 id="focus-considerations">Focus considerations</h3>
<p>When the dialog opens, the first focusable element receives the focus. From there, the focus is being &#x201C;trapped&#x201D; within the dialog: pressing <kbd>TAB</kbd> while focusing the last element will move the focus to the first, and pressing <kbd>SHIFT</kbd> + <kbd>TAB</kbd> while focusing the first element will move the focus to the last.</p>
<p>Note that <a href="https://github.com/HugoGiraudel/focusable-selectors" target="_blank">the way focusable elements are queried</a> to handle the first and last ones as mentioned above is not completely bulletproof. For instance, it does not consider <code>&lt;object&gt;</code> elements, <code>&lt;embed&gt;</code> elements and <code>&lt;details&gt;</code> element without any child <code>&lt;summary&gt;</code> as focusable while it technically should. It also shows some inconsistencies with <code>&lt;iframe&gt;</code> elements when first or last focusable element.</p>
<p>Additionally, if a form control within the dialog has the <code>autofocus</code> HTML attribute, it will receive focus when the dialog gets open instead of the first focusable item. The focus trap is not impacted by this whatsoever.</p>
<p>When the dialog closes, the element which was previously focused before opening should receive the focus back.</p>
<h3 id="events">Events</h3>
<p>When shown, hidden and destroyed, the instance will emit certain events. It is possible to subscribe to these with the <code>on()</code> method which will receive the dialog container element and the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event" target="_blank">event object</a> (if any).</p>
<p>The event object can be used to know which trigger (opener / closer) has been used in case of a <code>show</code> or <code>hide</code> event.</p>
<pre><code class="lang-javascript">dialog.on(<span class="hljs-string">&apos;show&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">dialogEl, event</span>) </span>{
  <span class="hljs-comment">// Do something when dialog gets shown</span>
  <span class="hljs-comment">// Note: opener is `event.currentTarget`</span>
})

dialog.on(<span class="hljs-string">&apos;hide&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">dialogEl, event</span>) </span>{
  <span class="hljs-comment">// Do something when dialog gets hidden</span>
  <span class="hljs-comment">// Note: closer is `event.currentTarget`</span>
})

dialog.on(<span class="hljs-string">&apos;destroy&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">dialogEl</span>) </span>{
  <span class="hljs-comment">// Do something when dialog gets destroyed</span>
})

dialog.on(<span class="hljs-string">&apos;create&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">dialogEl</span>) </span>{
  <span class="hljs-comment">// Do something when dialog gets created</span>
  <span class="hljs-comment">// Note: because the initial `create()` call is made from the constructor, it</span>
  <span class="hljs-comment">// is not possible to react to this particular one (as registering will be</span>
  <span class="hljs-comment">// done after instantiation)</span>
})
</code></pre>
<p>You can unregister these handlers with the <code>off()</code> method.</p>
<pre><code class="lang-javascript">dialog.on(<span class="hljs-string">&apos;show&apos;</span>, doSomething)
<span class="hljs-comment">// &#x2026;</span>
dialog.off(<span class="hljs-string">&apos;show&apos;</span>, doSomething)
</code></pre>
<h3 id="animations">Animations</h3>
<p>As mentioned in the <a href="#styling">styling</a> section, how the dialog looks is entirely up to the implementor (you). The following boilerplate code can be used to add a simple entering animation to the dialog.</p>
<pre><code class="lang-css">@<span class="hljs-keyword">keyframes</span> fade-in {
  <span class="hljs-selector-tag">from</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  }
}

@<span class="hljs-keyword">keyframes</span> slide-up {
  <span class="hljs-selector-tag">from</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(10%);
  }
}

<span class="hljs-selector-class">.dialog-overlay</span> {
  <span class="hljs-attribute">animation</span>: fade-in <span class="hljs-number">200ms</span> both;
}

<span class="hljs-comment">/**
 * 1. Add an animation delay equal to the overlay animation duration to wait for
 *    the overlay to appear before animation in the dialog.
 */</span>
<span class="hljs-selector-class">.dialog-content</span> {
  <span class="hljs-attribute">animation</span>: fade-in <span class="hljs-number">400ms</span> <span class="hljs-number">200ms</span> both, slide-up <span class="hljs-number">400ms</span> <span class="hljs-number">200ms</span> both; <span class="hljs-comment">/* 1 */</span>
}
</code></pre>
<h3 id="prevent-window-scroll">Prevent window scroll</h3>
<p>While the page might not be interactive below the dialog, the window will still receive and process scroll events, making it possible to scroll the page while the dialog is open. This might not be desired. To prevent it from happening, one can hide overflow from the <code>&lt;html&gt;</code> element when the dialog opens, and restore it when hidden:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> html = <span class="hljs-built_in">document</span>.documentElement
<span class="hljs-keyword">const</span> dialog = <span class="hljs-keyword">new</span> A11yDialog(dialogNode)

dialog
  .on(<span class="hljs-string">&apos;show&apos;</span>, () =&gt; (html.style.overflowY = <span class="hljs-string">&apos;hidden&apos;</span>))
  .on(<span class="hljs-string">&apos;hide&apos;</span>, () =&gt; (html.style.overflowY = <span class="hljs-string">&apos;&apos;</span>))
</code></pre>
<h3 id="usage-as-a-modal">Usage as a &#x201C;modal&#x201D;</h3>
<p>By default, a11y-dialog behaves as a dialog: it is closable with the <kbd>ESC</kbd> key, and by clicking the backdrop (provided the <code>data-a11y-dialog-hide</code> attribute is given to is). However, it is possible to make it work like a &#x201C;modal&#x201D;, which would remove these features.</p>
<p>To do so:</p>
<ol>
<li>Replace <code>role=&quot;dialog&quot;</code> with <code>role=&quot;alertdialog&quot;</code>. This will make sure <kbd>ESC</kbd> doesn&#x2019;t close the modal. Note that this role does not work properly with the <a href="#using-the-dialog-html-element">native <code>&lt;dialog&gt;</code> element</a> so make sure to use <code>&lt;div role=&quot;alertdialog&quot;&gt;</code>.</li>
<li>Remove <code>data-a11y-dialog-hide</code> from the overlay element. This makes sure it is not possible to close the modal by clicking outside of it.</li>
<li>In case the user actively needs to operate with the modal, you might consider removing the close button from it. Be sure to still offer a way to eventually close the modal.</li>
</ol>
<p>For more information about modals, refer to the <a href="https://www.w3.org/TR/wai-aria-1.1/#alertdialog" target="_blank">WAI ARIA recommendations</a>.</p>
<h3 id="using-the-dialog-html-element">Using the dialog HTML element</h3>
<p>As mentioned in the <a href="#html-boilerplate">HTML section</a>, the script works fine with the native HTML <code>&lt;dialog&gt;</code> element and will polyfill its behaviour so the dialog works in any browser, regardless of their support for that HTML element. However, it is recommended <em>not</em> to use it and to rely on a <code>&lt;div&gt;</code> with <code>role=&quot;dialog&quot;</code> instead. Amongst other, here are the issues with the HTML <code>&lt;dialog&gt;</code> element:</p>
<ul>
<li>Clicking the backdrop does not close the dialog on Chrome.</li>
<li>The native <code>::backdrop</code> only shows when programatically opening the dialog, not when using the <code>open</code> attribute.</li>
<li>Default styles are left to the browsers&#x2019; discretion and can be inconsistent.</li>
<li>The <a href="#usage-as-a-modal">modal pattern</a> (<code>role=&quot;alertdialog&quot;</code>) simply does not work with the dialog element.</li>
<li>It still requires JavaScript anyway, so it&#x2019;s not even 100% HTML.</li>
<li><a href="https://www.scottohara.me/blog/2019/03/05/open-dialog.html" target="_blank">Read more about the shortcoming of the dialog element by Scott O&apos;hara</a>.</li>
</ul>
<p>If you really want to use the <code>&lt;dialog&gt;</code> HTML element nevertheless, here are a few things you should know.</p>
<p>The <a href="#styling">provided base styles</a> will not quite work because the dialog container does not receive the <code>aria-hidden</code> attribute when hidden. That is because the dialog&#x2019;s visibility is handled by the user-agent itself. This means the container is essentially always displayed. For that reason, it should not made fixed on top of everything, otherwise it prevents interacting with the page at all.</p>
<p>Fortunately, the library adds a <code>data-a11y-dialog-native</code> attribute (with no value) when the <code>&lt;dialog&gt;</code> element is used and natively supported. This attribute can be used to customise the styling layer based on user-agent support (or lack thereof).</p>
<p>The following styles are more suited to using <code>&lt;dialog&gt;</code>.</p>
<pre><code class="lang-css"><span class="hljs-comment">/**
 * 1. When the native `&lt;dialog&gt;` element is supported and used, the overlay is
 *    handled natively and can be styled with `::backdrop`, which means the DOM
 *    one should be removed. Feel free to replace `:first-child` with the
 *    overlay selector of your choice.
 */</span>
<span class="hljs-selector-attr">[data-a11y-dialog-native]</span> &gt; <span class="hljs-selector-pseudo">:first-child</span> {
  <span class="hljs-attribute">display</span>: none; <span class="hljs-comment">/* 1 */</span>
}

<span class="hljs-comment">/**
 * 1. Absolutely center the dialog on top of the page.
 */</span>
<span class="hljs-selector-tag">dialog</span> {
  <span class="hljs-attribute">position</span>: fixed; <span class="hljs-comment">/* 1 */</span>
  <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>; <span class="hljs-comment">/* 1 */</span>
  <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>; <span class="hljs-comment">/* 1 */</span>
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-50%, -50%); <span class="hljs-comment">/* 1 */</span>
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2</span>; <span class="hljs-comment">/* 1 */</span>
}

<span class="hljs-comment">/**
 * 1. When the `&lt;dialog&gt;` element is used but not supported by the user agent,
 *    its default display is `inline` which can cause layout issues. This makes
 *    sure the dialog is correctly displayed when open.
 */</span>
<span class="hljs-selector-tag">dialog</span><span class="hljs-selector-attr">[open]</span> {
  <span class="hljs-attribute">display</span>: block; <span class="hljs-comment">/* 1 */</span>
}

<span class="hljs-comment">/**
 * 1. Make the overlay look like an overlay.
 */</span>
<span class="hljs-selector-tag">dialog</span><span class="hljs-selector-pseudo">::backdrop</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(43, 46, 56, 0.9); <span class="hljs-comment">/* 1 */</span>
}
</code></pre>
<p>When the <code>&lt;dialog&gt;</code> element is used and natively supported, the argument passed to <code>show()</code> and <code>hide()</code> is being passed to the native call to <a href="https://www.w3.org/TR/html52/interactive-elements.html#dom-htmldialogelement-showmodal" target="_blank"><code>showModal()</code></a> and <a href="https://www.w3.org/TR/html52/interactive-elements.html#dom-htmldialogelement-close" target="_blank"><code>close()</code></a>. If necessary, the <code>returnValue</code> can be read using <code>&lt;instance&gt;.dialog.returnValue</code>.</p>
<h3 id="nested-dialogs">Nested dialogs</h3>
<p>Nesting dialogs is a <a href="https://ux.stackexchange.com/questions/52042/is-it-acceptable-to-open-a-modal-popup-on-top-of-another-modal-popup" target="_blank">questionable design pattern</a> that is not referenced anywhere in the <a href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" target="_blank">HTML 5.2 Dialog specification</a>. Therefore it is actively discouraged in favour of clearer interface design.</p>
<p>That being said, it is supported by the library, under the following conditions:</p>
<ul>
<li>Dialogs should live next to each other in the DOM.</li>
<li>The <code>targets</code> argument of the constructor or value of the <code>data-a11y-dialog</code> attribute of every dialog should <em>not</em> include the other dialogs, only the main content container. For instance:</li>
</ul>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;main&quot;</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- The main content container --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dialog-1&quot;</span> <span class="hljs-attr">data-a11y-dialog</span>=<span class="hljs-string">&quot;#main&quot;</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- Dialog 1 content + a button to open dialog 2 --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dialog-2&quot;</span> <span class="hljs-attr">data-a11y-dialog</span>=<span class="hljs-string">&quot;#main&quot;</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- Dialog 2 content + a button to open dialog 3 --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dialog-3&quot;</span> <span class="hljs-attr">data-a11y-dialog</span>=<span class="hljs-string">&quot;#main&quot;</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- Dialog 3 content --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>Pressing <kbd>ESC</kbd> or clicking the backdrop will only close the top-most dialog, while the other remain untouched. It essentially makes it possible to stack dialogs on top of each other, then closing them one at a time.</p>
<p>There is an example in the <a href="https://github.com/HugoGiraudel/a11y-dialog/blob/main/example/tests/nested-dialogs.html" target="_blank">example/tests</a> directory of the repository, as well as an associated test in <a href="https://github.com/HugoGiraudel/a11y-dialog/blob/main/cypress/integration/nestedDialogs.html" target="_blank">cypress/integration</a>. The original feature request by Renato de Le&#xE3;o remains in <a href="https://github.com/HugoGiraudel/a11y-dialog/issues/80#issuecomment-377691629" target="_blank">issue #80</a>.</p>
<h2 id="further-reading">Further reading</h2>
<h3 id="known-issues">Known issues</h3>
<ol>
<li><p>It has been reported that the focus restoration to the formerly active element when closing the dialog does not always work properly on iOS. It is unclear what causes this or even if it happens consistently. Refer to <a href="https://github.com/HugoGiraudel/a11y-dialog/issues/102" target="_blank">issue #102</a> as a reference.</p>
</li>
<li><p>Content with <code>aria-hidden</code> appears to be sometimes read by VoiceOver on iOS and macOS. It is unclear in which case this happens, and does not appear to be an issue directly related to the library. Refer to this <a href="https://bugs.webkit.org/show_bug.cgi?id=201887#c2" target="_blank">WebKit bug</a> for reference.</p>
</li>
</ol>
<h3 id="implementations">Implementations</h3>
<p>If you happen to work with <a href="https://github.com/facebook/react/" target="_blank">React</a> or <a href="https://github.com/vuejs/vue" target="_blank">Vue</a> in your project, you&#x2019;re lucky! There are already great light-weight wrapper implemented for a11y-dialog:</p>
<ul>
<li><a href="https://github.com/HugoGiraudel/react-a11y-dialog" target="_blank">React A11yDialog</a></li>
<li><a href="https://github.com/morkro/vue-a11y-dialog" target="_blank">Vue A11yDialog</a></li>
</ul>
<h3 id="disclaimer--credits">Disclaimer &amp; credits</h3>
<p>Originally, this repository was a fork from <a href="https://github.com/gdkraus/accessible-modal-dialog" target="_blank">accessible-modal-dialog &#x2197;</a> by Greg Kraus. It has gone through various stages since the initial implementation and both packages are no longer similar in the way they work.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="./#installation" class="navigation navigation-next navigation-unique" aria-label="Next page: Installation">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Introduction","level":"1.1","depth":1,"next":{"title":"Installation","level":"1.2","depth":1,"anchor":"#installation","path":"README.md","ref":"README.md#installation","articles":[{"title":"Using a bundler (recommended)","level":"1.2.1","depth":2,"anchor":"#using-a-bundler-recommended","path":"README.md","ref":"README.md#using-a-bundler-recommended","articles":[]},{"title":"Using a CDN","level":"1.2.2","depth":2,"anchor":"#using-a-cdn","path":"README.md","ref":"README.md#using-a-cdn","articles":[]}]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Hugo “Kitty” Giraudel","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"a11y-dialog","language":"en","gitbook":"*"},"file":{"path":"README.md","mtime":"2021-02-27T19:03:03.597Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-02-27T19:03:14.545Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

